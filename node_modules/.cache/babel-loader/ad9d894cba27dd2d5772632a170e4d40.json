{"ast":null,"code":"var _jsxFileName = \"/Users/weiben/stuff/9. Code Tests/react-infinity-scroll - FINISHED/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useVirtual } from 'react-virtual'; // Components\n\nimport User from './User'; // Styles\n\nimport { Content, Loading } from './App.styles'; // API\n\nimport { getUsers } from './API';\n\nfunction App() {\n  const [page, setPage] = useState(1);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const parentRef = React.useRef();\n  const rowVirtualizer = useVirtual({\n    size: 20,\n    parentRef,\n    estimateSize: React.useCallback(() => 60, []),\n    overscan: 20\n  });\n\n  const handleScroll = event => {\n    const {\n      scrollTop,\n      clientHeight,\n      scrollHeight\n    } = event.currentTarget;\n\n    if (scrollHeight - scrollTop === clientHeight) {\n      setPage(prev => prev + 1);\n    }\n  };\n\n  useEffect(() => {\n    const loadUsers = async () => {\n      setLoading(true);\n      const newUsers = await getUsers(page);\n      setUsers(prev => [...prev, ...newUsers]);\n      setLoading(false);\n    };\n\n    loadUsers();\n  }, [page]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, users.length > 0 && /*#__PURE__*/React.createElement(Content, {\n    ref: parentRef,\n    onScroll: handleScroll,\n    className: \"List\",\n    style: {\n      height: `200px`,\n      width: `100%`,\n      overflow: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ListInner\",\n    style: {\n      height: `${rowVirtualizer.totalSize}px`,\n      width: '100%',\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, rowVirtualizer.virtualItems.map(virtualRow => /*#__PURE__*/React.createElement(\"div\", {\n    key: virtualRow.index,\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: `${virtualRow.size}px`,\n      transform: `translateY(${virtualRow.start}px)`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(User, {\n    key: users[virtualRow.index].cell,\n    user: users[virtualRow.index],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }))))), loading && /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  }, \"Loading ...\"));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/weiben/stuff/9. Code Tests/react-infinity-scroll - FINISHED/src/App.js"],"names":["React","useState","useEffect","useVirtual","User","Content","Loading","getUsers","App","page","setPage","users","setUsers","loading","setLoading","parentRef","useRef","rowVirtualizer","size","estimateSize","useCallback","overscan","handleScroll","event","scrollTop","clientHeight","scrollHeight","currentTarget","prev","loadUsers","newUsers","length","height","width","overflow","totalSize","position","virtualItems","map","virtualRow","index","top","left","transform","start","cell"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useVirtual } from 'react-virtual';\n// Components\nimport User from './User';\n// Styles\nimport { Content, Loading } from './App.styles';\n// API\nimport { getUsers } from './API';\n\nfunction App() {\n  const [page, setPage] = useState(1);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const parentRef = React.useRef();\n  const rowVirtualizer = useVirtual({\n    size: 20,\n    parentRef,\n    estimateSize: React.useCallback(() => 60, []),\n    overscan: 20,\n  });\n\n  const handleScroll = (event) => {\n    const { scrollTop, clientHeight, scrollHeight } = event.currentTarget;\n\n    if (scrollHeight - scrollTop === clientHeight) {\n      setPage((prev) => prev + 1);\n    }\n  };\n\n  useEffect(() => {\n    const loadUsers = async () => {\n      setLoading(true);\n      const newUsers = await getUsers(page);\n      setUsers((prev) => [...prev, ...newUsers]);\n      setLoading(false);\n    };\n\n    loadUsers();\n  }, [page]);\n\n  return (\n    <div className='App'>\n      {users.length > 0 && (\n        <Content\n          ref={parentRef}\n          onScroll={handleScroll}\n          className='List'\n          style={{\n            height: `200px`,\n            width: `100%`,\n            overflow: 'auto',\n          }}\n        >\n          <div\n            className='ListInner'\n            style={{\n              height: `${rowVirtualizer.totalSize}px`,\n              width: '100%',\n              position: 'relative',\n            }}\n          >\n            {rowVirtualizer.virtualItems.map((virtualRow) => (\n              <div\n                key={virtualRow.index}\n                style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: `${virtualRow.size}px`,\n                  transform: `translateY(${virtualRow.start}px)`,\n                }}\n              >\n                <User\n                  key={users[virtualRow.index].cell}\n                  user={users[virtualRow.index]}\n                />\n              </div>\n            ))}\n          </div>\n        </Content>\n      )}\n      {loading && <Loading>Loading ...</Loading>}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}